<!-- sdfasdf -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Koku Messenger- main</title>
        <!-- Dynamically create <base> before loading anything else -->
  <!-- <script>
    (function() {
      const isProd = window.location.pathname.startsWith('/project/koku-messenger');
      const baseHref = isProd ? '/project/koku-messenger/' : '/';
      const baseEl = document.createElement('base');
      baseEl.setAttribute('href', baseHref);
      document.head.appendChild(baseEl);
    })();
  </script> -->
    <script>
    // Insert base tag before anything else
    (function() {
      const isProd = window.location.pathname.startsWith('/project/koku-messenger');
      const baseHref = isProd ? '/project/koku-messenger/' : '/';
      const baseEl = document.createElement('base');
      baseEl.setAttribute('href', baseHref);
      document.head.insertBefore(baseEl, document.head.firstChild);
    })();
  </script>
  <!-- <base href="/project/koku-messenger/"> -->
         <link rel="icon" href="/assets/icon/feather.svg">
         <script>
    // Apply saved theme immediately to prevent flicker
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.documentElement.setAttribute('data-bs-theme', 'dark');
    } else if (savedTheme === 'light') {
      document.documentElement.setAttribute('data-bs-theme', 'light');
    }
  </script>
        <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/main/style.css">  
</head>
  <body>
<div class="container">
    <div class="row full-height">

        <!-- left-side -->

        <div class="background-info-bg-subtle col-lg-8  d-flex flex-column g-0" id="left-side">
            <div class="welcome-left-tray background-white mx-3 mt-3 mb-2 d-flex align-items-center border-bottom shadow-sm" id="welcome-left-tray">  
              <div class="navbar-user__dp background-white shadow-sm" id="leftUserDp">
                <h5 id="leftUserDp_name" style="color: #000000;"></h5>
              </div>
              <div class="d-flex mt-2">
                <p class=" welcome-message font-color-black mb-0" style="font-size: 1.2rem;">Welcome &nbsp;</p>
                <p class="username" id="leftUserName"></p>  
              </div>
                <div class="typing-indicator d-flex ms-auto me-2">
                  
                  <div class=" d-flex user-typing-indicator">
                    <div class="typing-pic background-white circle-image-fit">
                      <img src="/assets/image/craiyon_185744_Best_Instagram_Profile_pictures_for_boys.png" class="circle-image-fit shadow-sm" alt="display-picture">
                    </div>
                    <div id="typing-indicator-name" class="ms-1 font-color-black" ><b>prawin</b></div>
                    <p class=".typing-text font-color-black">&nbsp;typing....</p>
                  </div>  
                  
                </div>

                
                
            </div>
            <!-- message-body -->
            <div class="message-body background-white mx-3 flex-grow-1">

            </div>

            <!-- message input -->
            <div class="message-input-container background-white d-flex mx-3 mb-3">
              <input type="text" class="background-info-bg-subtle mx-2 shadow-sm" placeholder="Type your message here...." id="message-input">
              <button type="button" class="btn btn-primary me-2" id="message-submit-button"><span id="Submit">Send</span>
              </button>
            </div>
        </div>
        <!-- right-side -->


        <div class="col-lg-4 background-info-bg-subtle d-flex flex-column d-none d-lg-block" id="right-side">
            <div class="welcome-right-tray background-white mx-3 mt-3 mb-2 shadow-sm d-flex" id="welcome-right-tray" >
              <div class="navbar-user__dp shadow-sm" id="rightUserDp">
                <h5 id="rightUserDp_name" style="color: #000000;"></h5>
              </div>
                    <div class="name-online d-flex flex-column ">
                        <p class="mt-1 mb-0 font-color-black" id="rightUserName" style="font-size: 1.1rem;"></p>
                        <div class="d-flex align-items-center mt-1">
                        <div class="main-online-circle me-2 font-color-black"></div><p class="mb-0">online</p>
                        </div>
                  </div>
         
                 <!-- dropdown-menu -->
                  
                 
            </div>    


            <!-- online-users -->


            <div class="users-container background-white mx-3 mb-1 d-flex flex-column shadow-sm">
              <div class=" ps-2 d-flex ">
                <p style="font-size:larger" class="font-color-black">Online</p>
                <div class="online-user-count d-flex justify-content-center">
                  
                </div>
              </div>
              <!-- list -->
              <div class="users-list online-user-list">
            

              </div>
            </div>


            <div class="users-container background-white mx-3 mt-1 d-flex flex-column shadow-sm">
              <div class="ps-1 d-flex">
                <p style="font-size:larger">Offline</p>
                <div class="offline-user-count d-flex justify-content-center">
                  
                </div>
              </div>
              <!-- list -->
              <div class="users-list  offline-user-list">



                
              </div>
            </div>  
        </div>
    </div>
</div>


<!-- Dropdown Template -->
<template id="dropdown-template">
  <div class="dropdown  me-2" id="dynamic-dropdown">
    <button class="btn dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                      <img src="/assets/icon/three-dots-vertical.svg" class="dropdown-icon" style="width: 20px;" alt="dropdown"></button>
                    <ul class="dropdown-menu"> 
                      <!-- profile collapse -->
                      <li><a class="dropdown-item dropdown-toggle" data-bs-toggle="collapse" href="#collapse-change-profile-picture" role="button" aria-expanded="false" aria-controls="collapseExample"><small>Change Profile Picture&nbsp;</small></a></li>
                      <div class="collapse ms-4 " id="collapse-change-profile-picture">
                        <!-- profile picture upload -->
                        <li><a class="collapse-iteam d-flex hover-primary" id="collapse-iteam__info-members" data-bs-toggle="modal" data-bs-target="#upload-profile-picture-modal" ><img src="assets/icon/upload.svg" class="dropdown-icon" style="width: 20px;" alt="">
                          &nbsp;&nbsp; <small class="font-color-black">Upload photo</small>
                          </a></li>
                        <!-- profile picture delete -->
                          <li><a class="collapse-iteam d-flex hover-primary" id="profile-picture-remove" href="#"><img src="assets/icon/remove.svg" class="dropdown-icon" style="width: 20px;" alt="">
                            &nbsp;&nbsp;<small class="font-color-black">Remove photo</small>
                            </a></li>
                           </div>
                      <li><hr class="dropdown-divider"></li>
                      <li class="d-flex justify-content-center" id="switch-container">
                        <small>Light &nbsp;</small>
                        <img src="/assets/icon/light mode.svg" class="dropdown-icon"  style="width: 24px;" alt="lightmode">&nbsp;&nbsp;
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="displayMode" >
                      </div>
                      <img src="/assets/icon/dark mode.svg" class="dropdown-icon"  style="width: 24px;" alt="darkmode">
                      <small>  &nbsp; Dark</small>
                      </li>
                      <li><hr class="dropdown-divider"></li>
      
                       <!-- info collapse -->
                      <li><a class="dropdown-item dropdown-toggle" data-bs-toggle="collapse" href="#collapse-info" role="button" aria-expanded="false" aria-controls="collapseExample"><small>Chat Info &nbsp;</small></a></li>
                      <div class="collapse ms-4 " id="collapse-info">
                        <li><div class="collapse-iteam d-flex align-items-center" id="collapse-iteam__info-members" href="#">
                          <div class=" online-circle-indicator bg-success me-2" style="width: 1rem; height:1rem; border-radius: 50%;" ></div>
                          <small class="font-color-black">&nbsp;&nbsp;Online</small>
                          <div class="collapse-count ms-2 d-flex justify-content-center align-items-center online-users-count font-color-black" style="width: 21px; height:21px; border-style:solid; border-color:#000000;  border-radius: 50%;font-size: small;">
                            
                          </div>
                        </div></li>
                          <li><div class="collapse-iteam d-flex align-items-center mt-1 " id="collapse-iteam__info-members" href="#">
                            <div class=" offline-circle-indicator bg-danger me-2" style="width: 1rem; height:1rem; border-radius: 50%;"></div>
                           <small class="font-color-black"> &nbsp;&nbsp;Offline</small>
                            <div class="collapse-count ms-2 d-flex justify-content-center align-items-center offline-users-count font-color-black" style="width: 21px; height:21px; border-style:solid; border-color:#000000;  border-radius: 50%; font-size: small;">
                              
                            </div>
                          </div></li>
                            <li><div class="collapse-iteam d-flex align-items-center" id="collapse-iteam__info-members" href="#">
                              <div class=" all-members-circle-indicator bg-primary me-2" style="width: 1rem; height:1rem; border-radius: 50%;"></div>
                              <small class="font-color-black">&nbsp;&nbsp;All Members</small>
                              <div class="collapse-count ms-2 d-flex justify-content-center align-items-center total-users-count font-color-black" style="width: 21px; height:21px; border-style:solid; border-color:#000000;  border-radius: 50%;font-size: small;">
                                
                              </div>
                            </div></li>
                           </div>
                      <li><hr class="dropdown dropdown-divider"></li>
                      <li><a class="dropdown-item dropdown__logout py-0" id="user-logout" ><img src="./assets/icon/logout.svg" class="dropdown-icon"  style="width: 21px;" alt="logout"> <small>&nbsp;Log out</small></a></li>
                    </ul>
                  </div> 
  </div>
</template>



    <!-- upload profile picture Modal -->
<div class="modal fade" id="upload-profile-picture-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" >
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="uploadProfileForm" enctype="multipart/form-data">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Upload Profile Picture</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="file" accept="image/*" id="profilepictureUpload" name="profileImage">
          <div class="upload__view-container mt-2 previewContainer" style="width: 22rem; height: 15rem; display: none;">
            <!-- Image preview can be inserted here via JavaScript -->
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" id="profile-upload-cancel" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" id="profile-upload-button" class="btn btn-primary">Upload</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- socketConfig  -->
<script type="module" src="/main/socket.config.js"></script>

<!-- Socket.IO library -->
 <!-- <script src="http://localhost:5300/socket.io/socket.io.js"></script> -->

<!-- jQuery library (required by Bootstrap if needed) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<!-- Custom script -->
<script src="/main/script.js"></script>

  </body>
</html>